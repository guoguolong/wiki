## !问题来源

一般看JQuery插件里的写法是这样的

```js
(function($) {         
  //...  
})(jQuery);
```

今天看到bootstrap的javascript组件是这样写的

```js
!function( $ ){
  //...
}( window.jQuery );
```

为什么要在前面加一个 " ! " 呢？

## !问题解析

我们都知道，函数的声明方式有这两种

```js
function fnA(){alert('msg');}//声明式定义函数
var fnB = function(){alert('msg');}//函数赋值表达式定义函数
```

楼主问题中出现的两个函数，都是匿名函数。通常，我们调用一个方法的方式就是 FunctionName()

但是，如果我们尝试为一个“定义函数”末尾加上()，解析器是无法理解的。

```js
function msg(){
  alert('message');
}();//解析器是无法理解的
```

定义函数的调用方式应该是 msg() ;

如果将函数体部分用()包裹起来就可以运行并且解析器是不报错的，如：

```
(function($) {         
  //...  
})(jQuery);
```

那为什么将函数体部分用()包裹起来就可以了呢？

原来，使用括号包裹定义函数体，解析器将会以函数表达式的方式去调用定义函数。也就是说，任何能将函数变成一个函数表达式的作法，都可以使解析器正确的调用定义函数。而 ! 就是其中一个，而 + - || 都有这样的功能。

> 另外，用 ! 可能更多的是一个习惯问题，不同的运算符，性 能是不同的。这些有一篇非常详细的文章，推荐阅读：http://swordair.com/function-and-exclamation-mark/ 就是为了能省略一个字符……

```js
// 这么写会报错，因为这是一个函数定义：
function() {}()
// 常见的（多了一对括号），调用匿名函数：
(function() {})()
// 但在前面加上一个布尔运算符（只多了一个感叹号），就是表达式了，
// 将执行后面的代码，也就合法实现调用
!function() {}()
```

在前面加上~+-等一元操作符也可以。。其实还有好几种符合都可以保证匿名函数声明完就立即执行

```js
var hi = function(){ alert("hi") };
hi();
// 等于...
(function(){ alert("hi") })(); 
```

!、+和()一样的效果可以把换成 !function(){ alert("hi") }(); !比()节省一个字符，或者说比()好看些

## ;问题解析

我们都知道分号是为了和前面的代码隔开，js可以用换行分隔代码，但是合并压缩多个js文件之后，换行符一般会被删掉，所以连在一起可能会出错，加上分号就保险了。

你看到的感叹号，一般是在压缩过的js文件里面，因为在匿名函数调用的时候，通常我们都是用： (function(){})() 的形式，但也可以使用另一种形式：!function(){}()　前面的!号可以换成-+~等等一元操作符，从而省下了1字节